# innostage-test

## Setup

Создать в корне `.env` и добавить `clinet_id` и `client_secret` из  [Github OAuth application](https://github.com/settings/applications/new). Образец `.env.example`.

```
yarn install
yarn serve
```

## Проблемы и решения

### Как работает InfinitiScroll

В качестве триггера используется IntersectionObserver который следит за элементом с абсолютным позиционированием по самому низу и высотой в 1 экран (100vh). Как только  скроллить до конца страницы останется 1 экран, то значит пришло время загружать новую порцию данных. Сделано так, чтобы как можно реже упираться в дно страницы.

У компонента `InfinityScroll` есть пропс `page`. Он исправляет поведение, когда элементы внутри `InfinityScroll` занимают меньше 2-х экранов, обсервер не покидает зону видимости и запроса следующих данных не происходит. `page` служит ключом для маунта нового `Observer` который корректно триггернется если будет в зоне видимости. Предполагается, что в `page` будет передаваться последняя загруженная страница.


### Запросы

При частом обращении к API (в частности к поиску юзеров) возвращается лимита обращений. Нужно немного подождать. В `Users.vue` есть метод `retryRequest` для повторения запроса несколько раз с определенной задержкой. Но пока идут попытки повторить запрос, пользователь может передумать и захотеть сделать что-то другое, например, воспользоваться поиском. Поэтому, когда приходит время повторить запрос, сначала проверяются параметры, с которыми он должен быть вызван. Если запрос не актуален, то цепочка попыток заканчивается. 

Проверка актуальности запроса также выполняется после каждого предположительно конкурирующего запроса, перед тем как записать данные в состояние компонента. Этот функционал можно вынести в миксин. Возможное улучшение - отменять запросы, если они уже не актуалбны.


### Тесты 

Успел сделать unit-тесты только для сторы и функционала авторизации.


